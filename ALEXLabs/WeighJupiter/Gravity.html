<!DOCTYPE html>
<html>
<link rel="stylesheet" href="../ALEX.css">

<meta http-equiv='cache-control' content='no-cache'> 
<meta http-equiv='expires' content='0'> 
<meta http-equiv='pragma' content='no-cache'>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
<style>

body {
    background-color: brown;
}

* {
  box-sizing:border-box;
}

.column {
  float:left;
  width:50%;
}

.row:after {
  contents: "";
  display: table;
  clear: both;
}

img {
  width:85%;
  height:85%;
}


input {
  background-color:powderblue;
  border: 0.05vw solid darkblue;
  border-radius:16px;
  color:darkblue;
  padding:0.5vw;
  font-size:min(max(14pt, 2vw), 20pt);
}

input:hover {
  transition:0.25s;
  transform:scale(1.005);
  background-color:darkblue;
  color:powderblue;
  margin-left:0px;
  margin-right:0px;
}

input:not(:hover) {
  transition:0.5s;
  transform:scale(1);
  border: 0.05vw solid darkblue;
  color:darkblue;
}

img {
  border-radius:15px;
}

h2 {
  color:darkblue;
}

canvas {
  background-color:black;
  width:100%;
  height:100%;
  border-radius: 25px;
}

</style>

<script>
function backButton() {
  window.open("YouCanWeighJupiter.html","_self");
}
function reselectMoon() {
  window.open("moonSelector1.html","_self");
}

</script>

</head>

<header>
  <title>Gravity</title>
  <button class = "button biggerButton" onclick="backButton()">Main Menu</button>
  <button class = "button biggerButton" onclick="reselectMoon()">Back</button>
</header>

<body>
<div class="body"> 
  <canvas id="canvas" class="center" width="600" height="400"></canvas> <br>
</div>

<p><span id="testx"></span> <span id="testy"></span> <span id="testz"></span></p>
</body>

<script>

var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
resize();
//canvas.addEventListener("mousemove", setPosition);
//canvas.addEventListener("mousedown", setPosition);
canvas.addEventListener("click", startAnimation);
// canvas.addEventListener('click', mousePos, true);

pos = {x:0, y:0}

function setPosition(e) {
    pos.x = e.clientX;
    pos.y = e.clientY;
}

function drawings(e){
  pos.x = e.clientX;
  pos.y = e.clientY;

}

function resize() {
    context.canvas.width = window.innerWidth;
    context.canvas.height = window.innerHeight;
}

var interval_tracker = "";

var fps = 5;

function startAnimation(e) {
    numberClick++;
    draw(e);
    // interval_tracker = setInterval(function(){ //throttle requestAnimationFrame
    //    requestAnimationFrame(draw);
    // }, 1000/fps)
}

function stopAnimation() {
}

function Next() {
    if (numberClick >= 2) {
        var z = 0;
    }
}

function animate() {
}

var numberClick = 0;

var onePos = {x:0,y:0,vx:0,vy:0,ax:0,ay:0}
var twoPos = {x:0,y:0,vx:0,vy:0,ax:0,ay:0}

function draw(e) {
    pos.x = e.clientX;
    pos.y = e.clientY;
    context.strokeStyle = 'blue';
    context.beginPath();
    if (numberClick == 1) {
        context.lineWidth = 2.5;
        onePos.x = pos.x;
        onePos.y = pos.y;
        context.arc(pos.x, pos.y, 15, 0, 2 * Math.PI, true);
        context.stroke();
    } else {
        context.lineWidth = 2.5;
        twoPos.x = pos.x;
        twoPos.y = pos.y;
        context.arc(twoPos.x, twoPos.y, 15, 0, 2 * Math.PI, true);
        context.stroke();

        context.strokeStyle = 'blue';
        context.beginPath();
        context.lineWidth = 2.5;
        context.arc(onePos.x, onePos.y, 15, 0, 2 * Math.PI, true);
        context.stroke();
        updatePos();
    }
}

const G = 1e-5;
var dt = 1e-3;

function updatePos() {
    
    var distx = (onePos.x) - (twoPos.x);
    distx = distx/100;
    var disty = (onePos.x) - (twoPos.x);
    disty = disty/100;
    var dist  = (distx**2 + disty**2)**(1/2);

    if (Math.abs(dist) < 0.5) {
        document.getElementById("testx").innerHTML = "Finish";
        return;
    }
    if (dist > 500) {
      document.getElementById("testx").innerHTML = "Finish";
      return;
    }
    // document.getElementById("testx").innerHTML = onePos.x;
    // document.getElementById("testy").innerHTML = dist;
    onePos.ax = onePos.ax + G * 15 / (dist)**2;
    twoPos.ax = -onePos.ax
    onePos.ay = onePos.ay + G * 15 / (dist)**2;
    twoPos.ay = -onePos.ay
    
    onePos.vx = onePos.vx + onePos.ax * ( dt );
    onePos.vy = onePos.vy + onePos.ay * ( dt );
    twoPos.vx = twoPos.vx + twoPos.ax * ( dt );
    twoPos.vy = twoPos.vy + twoPos.ax * ( dt );
    document.getElementById("testx").innerHTML = onePos.ax;
    document.getElementById("testy").innerHTML = twoPos.ax;
    document.getElementById("testz").innerHTML = dist;
    onePos.x = onePos.x + onePos.vx * dt - onePos.ax * dt**2;
    onePos.y = onePos.y + onePos.vy * dt - onePos.ay * dt**2;
    twoPos.x = twoPos.x + twoPos.vx * dt - twoPos.ax * dt**2;
    twoPos.y = twoPos.y + twoPos.vy * dt - twoPos.ay * dt**2;
    
    //context.clearRect(canvas.width, canvas.height);
    
    context.strokeStyle = 'blue';
    
    context.beginPath();
    context.lineWidth = 2.5;
    context.arc(twoPos.x, twoPos.y, 15, 0, 2 * Math.PI, true);
    context.stroke();
    context.beginPath();
    context.lineWidth = 2.5;
    context.arc(onePos.x, onePos.y, 15, 0, 2 * Math.PI, true);
    context.stroke();
    
    if (onePos.y > 800) {
        window.clearInterval(interval_tracker);
        document.getElementById("testy").innerHTML = "Finish";
        document.getElementById("testy").innerHTML = dist;
    }
    interval_tracker = setInterval(function(){ //throttle requestAnimationFrame
        requestAnimationFrame(updatePos);
    }, 1000/fps)
}
</script>  

</html>